{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Line}from\"react-chartjs-2\";import numeral from\"numeral\";const options={legend:{display:false},elements:{point:{radius:0}},maintainAspectRatio:false,tooltips:{mode:\"index\",intersect:false,callbacks:{label:function(tooltipItem,data){return numeral(tooltipItem.value).format(\"+0,0\");}}},scales:{xAxes:[{type:\"time\",time:{format:\"MM/DD/YY\",tooltipFormat:\"ll\"}}],yAxes:[{gridLines:{display:false},ticks:{// Include a dollar sign in the ticks\ncallback:function(value,index,values){return numeral(value).format(\"0a\");}}}]}};const buildChartData=(data,casesType)=>{let chartData=[];let lastDataPoint;for(let date in data.cases){if(lastDataPoint){let newDataPoint={x:date,y:data[casesType][date]-lastDataPoint};chartData.push(newDataPoint);}lastDataPoint=data[casesType][date];}return chartData;};function LineGraph(_ref){let{casesType}=_ref;const[data,setData]=useState({});useEffect(()=>{const fetchData=async()=>{await fetch(\"https://disease.sh/v3/covid-19/historical/all?lastdays=120\").then(response=>{return response.json();}).then(data=>{let chartData=buildChartData(data,casesType);setData(chartData);console.log(chartData);// buildChart(chartData);\n});};fetchData();},[casesType]);return/*#__PURE__*/React.createElement(\"div\",null,(data===null||data===void 0?void 0:data.length)>0&&/*#__PURE__*/React.createElement(Line,{data:{datasets:[{backgroundColor:\"rgba(204, 16, 52, 0.5)\",borderColor:\"#CC1034\",data:data}]},options:options}));}export default LineGraph;","map":{"version":3,"names":["React","useState","useEffect","Line","numeral","options","legend","display","elements","point","radius","maintainAspectRatio","tooltips","mode","intersect","callbacks","label","tooltipItem","data","value","format","scales","xAxes","type","time","tooltipFormat","yAxes","gridLines","ticks","callback","index","values","buildChartData","casesType","chartData","lastDataPoint","date","cases","newDataPoint","x","y","push","LineGraph","_ref","setData","fetchData","fetch","then","response","json","console","log","createElement","length","datasets","backgroundColor","borderColor"],"sources":["/Users/gangadgaryadav/covid-19-tracker/src/LineGraph.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport numeral from \"numeral\";\n\nconst options = {\n  legend: {\n    display: false,\n  },\n  elements: {\n    point: {\n      radius: 0,\n    },\n  },\n  maintainAspectRatio: false,\n  tooltips: {\n    mode: \"index\",\n    intersect: false,\n    callbacks: {\n      label: function (tooltipItem, data) {\n        return numeral(tooltipItem.value).format(\"+0,0\");\n      },\n    },\n  },\n  scales: {\n    xAxes: [\n      {\n        type: \"time\",\n        time: {\n          format: \"MM/DD/YY\",\n          tooltipFormat: \"ll\",\n        },\n      },\n    ],\n    yAxes: [\n      {\n        gridLines: {\n          display: false,\n        },\n        ticks: {\n          // Include a dollar sign in the ticks\n          callback: function (value, index, values) {\n            return numeral(value).format(\"0a\");\n          },\n        },\n      },\n    ],\n  },\n};\n\nconst buildChartData = (data, casesType) => {\n  let chartData = [];\n  let lastDataPoint;\n  for (let date in data.cases) {\n    if (lastDataPoint) {\n      let newDataPoint = {\n        x: date,\n        y: data[casesType][date] - lastDataPoint,\n      };\n      chartData.push(newDataPoint);\n    }\n    lastDataPoint = data[casesType][date];\n  }\n  return chartData;\n};\n\nfunction LineGraph({ casesType }) {\n  const [data, setData] = useState({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\"https://disease.sh/v3/covid-19/historical/all?lastdays=120\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          let chartData = buildChartData(data, casesType);\n          setData(chartData);\n          console.log(chartData);\n          // buildChart(chartData);\n        });\n    };\n\n    fetchData();\n  }, [casesType]);\n\n  return (\n    <div>\n      {data?.length > 0 && (\n        <Line\n          data={{\n            datasets: [\n              {\n                backgroundColor: \"rgba(204, 16, 52, 0.5)\",\n                borderColor: \"#CC1034\",\n                data: data,\n              },\n            ],\n          }}\n          options={options}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default LineGraph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}